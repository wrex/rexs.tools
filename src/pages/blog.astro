---
import BaseLayout from "../layouts/BaseLayout.astro";
// import { Image, Picture } from "@astrojs/image/components";

const posts = (await Astro.glob("./posts/*.{md,mdx}")).sort(
  (a, b) =>
    new Date(b.frontmatter.pubDate).valueOf() -
    new Date(a.frontmatter.pubDate).valueOf()
);
---

<BaseLayout
  title="Blog"
  description="Recent posts"
  permalink="/blog"
  current="blog"
  ><div class="flow">
    <h1>Recent posts</h1>
    {
      posts.map((post) => (
        <article>
          <a href={post.url}>
            <div class="imageContainer">
              <img
                src={post.frontmatter.image.url}
                alt={post.frontmatter.image.alt}
              />
            </div>
          </a>
          <h4>
            <a href={post.url}>{post.frontmatter.title}</a>
          </h4>
          <p class="description">{post.frontmatter.description}</p>
          <ul class="tags">
            {post.frontmatter.tags.map((tag) => (
              <li>
                <a href="#">{tag}</a>
              </li>
            ))}
          </ul>
          <date>{post.frontmatter.pubDate.slice(0, 10)}</date>
        </article>
      ))
    }
  </div>
</BaseLayout>
